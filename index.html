<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Glass Dashboard</title>
  <link rel="stylesheet" href="./styles.css" />
  <!-- 外部ライブラリ -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- アプリ本体 -->
  <script src="./app.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="left">
      <div class="glass clock" id="clock">00:00</div>

      <div class="lower-left">
        <div class="col">
          <!-- YouTube -->
          <div class="glass panel">
            <div class="row">
              <input id="playlistInput" placeholder="YouTube プレイリストID（PL…）または動画ID → Enter" />
            </div>
            <div class="video" id="ytplayer"></div>
            <div class="controls">
              <button class="btn" id="prevBtn">◀◀</button>
              <button class="btn" id="playBtn">▶</button>
              <button class="btn" id="pauseBtn">⏸</button>
              <button class="btn" id="nextBtn">▶▶</button>
            </div>
          </div>

          <!-- タイマー -->
          <div class="glass panel">
            <div class="row">
              <select id="modeSelect" style="max-width:160px">
                <option value="plain">通常タイマー</option>
                <option value="pomodoro">ポモドーロ</option>
              </select>
              <input id="workLen" type="number" min="1" max="120" value="25" style="max-width:80px">
              <input id="breakLen" type="number" min="1" max="60" value="5" style="max-width:80px">
            </div>
            <div class="row" style="justify-content:space-between">
              <strong id="timerDisplay" class="timer-number">25:00</strong>
            </div>
            <div class="row" style="justify-content:flex-end">
              <button class="btn" id="startTimer">開始</button>
              <button class="btn" id="pauseTimer">一時停止</button>
              <button class="btn" id="resetTimer">リセット</button>
            </div>
          </div>

          <!-- 執筆管理 -->
          <div class="glass panel">
            <div class="row">
              目標 <input id="goalInput" type="number" min="1" step="1" placeholder="目標文字数" style="max-width:140px">
              現在 <input id="currentInput" type="number" min="0" step="1" style="max-width:140px">
              <label class="checkbox-line">
                <input type="checkbox" id="autoCount" checked> メモ自動カウント
              </label>
            </div>
            <div class="progress"><div class="bar" id="progBar"></div></div>
            <div class="row" style="justify-content:space-between">
              <span id="progText">0 / 0（0%）</span>
              <span>残り <span id="remainText">0</span></span>
            </div>
            <div class="row" style="justify-content:flex-end">
              <button class="btn" id="saveProgress">保存</button>
            </div>
          </div>
        </div>

        <!-- ToDo -->
        <div class="glass panel">
          <div class="row">
            <input id="todoInput" placeholder="ToDo を追加 → Enter" />
            <button class="btn" id="clearTodos">全部消す</button>
          </div>
          <div class="todo-list" id="todoList"></div>
        </div>
      </div>
    </div>

    <!-- メモ（Markdown + TOC + Toolbar） -->
    <div class="glass panel memo">
      <div class="memo-toolbar">
        <div class="toolbar-left">
          <div class="tgroup">
            <button class="tbtn" data-act="heading" data-level="1">H1</button>
            <button class="tbtn" data-act="heading" data-level="2">H2</button>
            <button class="tbtn" data-act="heading" data-level="3">H3</button>
            <button class="tbtn" data-act="heading" data-level="4">H4</button>
          </div>
          <div class="tgroup">
            <button class="tbtn" data-act="bold"><b>B</b></button>
            <button class="tbtn" data-act="italic"><i>I</i></button>
            <button class="tbtn" data-act="strike"><s>S</s></button>
            <button class="tbtn" data-act="code">code</button>
          </div>
          <div class="tgroup">
            <button class="tbtn" data-act="quote">引用</button>
            <button class="tbtn" data-act="ul">• 箇条</button>
            <button class="tbtn" data-act="ol">1. 番号</button>
            <button class="tbtn" data-act="task">☐ タスク</button>
          </div>
          <div class="tgroup">
            <button class="tbtn" data-act="link">🔗</button>
            <button class="tbtn" data-act="image">🖼</button>
            <button class="tbtn" data-act="hr">—</button>
            <button class="tbtn" data-act="fence">```</button>
          </div>
        </div>
        <div class="toolbar-right">
          <button class="btn" id="editMode">✎ 編集</button>
          <button class="btn" id="previewMode">👁 プレビュー</button>
          <button class="btn" id="saveMemo">保存</button>
          <button class="btn" id="clearMemo">消去</button>
        </div>
      </div>

      <div class="memo-split">
        <nav class="toc" id="toc">
          <h3>目次</h3>
          <ul id="tocList"></ul>
        </nav>
        <div class="memo-pane">
          <textarea id="memoArea" class="memo-editor" placeholder="# タイトル&#10;&#10;本文をMarkdownで書けます。"></textarea>
          <div id="memoPreview" class="memo-preview hidden"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ⚙️ 設定（FAB / パネル） -->
  <button class="glass btn fab" id="openSettings" title="設定">⚙️</button>
  <div class="glass settings" id="settingsPanel">
    <div class="row" style="margin-bottom:6px">
      <button class="btn" data-bg="gradient-1">夜空</button>
      <button class="btn" data-bg="gradient-2">朝焼け</button>
      <button class="btn" data-bg="gradient-3">森</button>
      <button class="btn" data-bg="solid">単色</button>
      <button class="btn" data-bg="image">画像</button>
    </div>
    <div class="row" id="bgControls"></div>
    <div class="row">
      <label>ぼかし</label>
      <input id="blurRange" type="range" min="6" max="24" value="12" style="flex:1">
      <button class="btn" id="resetView">リセット</button>
    </div>
    <hr class="sep">
    <div class="row">
      <button class="btn" id="toggleWhiteText">文字色を白にする</button>
    </div>
  </div>
</body>
</html>
